<!-- ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// -->


<nav class="headding">
  <button (click)="navigateToDashboard()"> Back to Dashboard</button>
 
  <h4 style="margin-right:400px;">Add your Course Planning</h4>
</nav>
<div class="completionPercentage">
  <progress style="width:800px;" [value]="completionPercentage" max="100">{{ completionPercentage }}%</progress>
  <span>{{ completionPercentage }}%</span>
</div>

<body>
  <div class="container">
    <div class="left-content">
      <div class="wrapper">
        <div class="sidnav">
          <ul class="ulList">
            <li (click)="setCurrentTab('courselanding')" [class.active]="currentTab === 'courselanding'"
              class="navcourse">
              <span class="Inspan">Course Landing</span>
            </li>
            <li (click)="setCurrentTab('coursetrailer')" [class.active]="currentTab === 'coursetrailer'" class="navcourse">
              <span class="Inspan">Course Trailer</span>
          </li>
            <li (click)="setCurrentTab('planning')" [class.active]="currentTab === 'planning'" class="navcourse">
              <span class="Inspan">Course Planning</span>
            </li>
            <li (click)="setCurrentTab('lesson')" [class.active]="currentTab === 'lesson'" class="navcourse">
              <span class="Inspan">Curriculum</span>
            </li>
            <li (click)="setCurrentTab('project')" [class.active]="currentTab === 'project'" class="navcourse">
              <span class="Inspan">Course Project</span>
            </li>
            <!-- <li (click)="setCurrentTab('dummy')" [class.active]="currentTab === 'dummy'" class="navcourse">
                            <span class="Inspan">dummy</span>
                        </li> -->

            <li (click)="setCurrentTab('pricing')" [class.active]="currentTab === 'pricing'" class="navcourse">
              <span class="Inspan">Pricing & Promotions</span>
            </li>

          </ul>
        </div>
      </div>
      <!-- <div class="submit-all-container">
        <button type="button" style="padding-left:61px;padding-right:61px;" (click)="submitAll()">Save All</button>
      </div> -->
    </div>
    <div class="right-content">



      <!-- Course Landing Tab Content -->
     
      <div *ngIf="currentTab === 'courselanding'" class="course-landing">
             <!-- <div class="progress-bar" style="top: 95px;">
               <span>{{ completionPercentage }}% Completed</span>
             </div> -->
             <div class="input-group">
               <label for="courseTitle">Course Title <span class="star">*</span></label>
               <input type="text" id="courseTitle" placeholder="Enter course title" [(ngModel)]="courseTitle"
                 (ngModelChange)="onFieldChange()">
               <div *ngIf="showCourseTitleError" class="error-message">Please enter a course title.</div>
             </div>
             <div class="input-group">
               <label for="level">Course Type:<span class="star">*</span></label>
               <select id="level" [(ngModel)]="level" (ngModelChange)="onFieldChange()">
                 <option value="Beginner">Beginner level</option>
                 <option value="Intermediate">Intermediate level</option>
                 <option value="Advanced">Advanced level</option>
               </select>
               <div *ngIf="showLevelError" class="error-message">Please select a course type.</div>
             </div>
            
             <div class="input-group">
               <label for="courseType">Course Mode:<span class="star">*</span></label>
               <select id="courseType" [(ngModel)]="courseType" (ngModelChange)="onFieldChange()">
                 <option value="online">Online</option>
                 <option value="offline">Offline</option>
               </select>
               <div *ngIf="showCourseTypeError" class="error-message">Please select a course mode.</div>
             </div>
      
             <div *ngIf="courseType === 'offline'" class="input-group">
               <label for="courseTerm">Course Term:<span class="star">*</span></label>
               <select id="courseTerm" [(ngModel)]="courseTerm" (ngModelChange)="onFieldChange()">
                 <option value="short">Short Course</option>
                 <option value="long">Long Course</option>
               </select>
               <div *ngIf="showCourseTermError" class="error-message">Please select a course term.</div>
             </div>
             <div class="form-group">
               <label for="courseDescription">Course Objective:</label>
      
                 <textarea id="courseDescription" [(ngModel)]="courseDescription" rows="4"
                   placeholder="Enter course objective" (ngModelChange)="onFieldChange()" >
                 </textarea>
                 <div *ngIf="showCourseDescriptionError" class="error-message">Please enter a course objective.</div>
        
             </div>
             <div class="input-group">
               <label for="courseImage">Course Image: <span class="star">*</span></label>
               <div class="courseImage-container">
                 <div class="courseImage-input">
                   <input type="file" (change)="onCourseImageSelected($event)" accept="image/*" name="courseImage">
                 </div>
               </div>
               <div *ngIf="showCourseImageError" class="error-message">Please upload a course image.</div>
             </div>
             <div class="input-group">
               <label for="whyEnroll">Why Enroll in this Course:<span class="star">*</span></label>
               <div class="why-enroll-container">
                 <div class="why-enroll-input">
                   <div class="input-wrapper">
                     <input type="text" [(ngModel)]="newWhyEnroll" placeholder="Enter reason">
                     <button (click)="addWhyEnroll()" style=" width:34px;height:34px;margin-bottom: 11px; " [disabled]="whyEnrolls.length >= 8 || !newWhyEnroll">
                       <i class="fas fa-plus"></i>
                     </button>
                   </div>
                 </div>
                 <ul class="why-enroll-list">
                   <li *ngFor="let whyEnroll of whyEnrolls; let i = index" class="why-enroll-item">
                     <input *ngIf="editingWhyEnrollIndex === i" type="text" [(ngModel)]="editingWhyEnroll" (keyup.enter)="saveWhyEnroll(i)">
                     <span *ngIf="editingWhyEnrollIndex !== i">{{ whyEnroll }}</span>
                     <div class="why-enroll-actions">
                       <button *ngIf="editingWhyEnrollIndex !== i" (click)="editWhyEnroll(i)" style=" width:34px;height:34px;margin-bottom: 11px; ">
                         <i class="fas fa-edit"></i>
                       </button>
                       <button *ngIf="editingWhyEnrollIndex === i" (click)="saveWhyEnroll(i)" style=" width:34px;height:34px;margin-bottom: 11px; ">
                         <i class="fas fa-save"></i>
                       </button>
                       <button (click)="removeWhyEnroll(i)" style=" width:34px;height:34px;margin-bottom: 11px; ">
                         <i class="fas fa-trash"></i>
                       </button>
                     </div>
                   </li>
                 </ul>
               </div>
               <div *ngIf="showWhyEnrollError" class="error-message">Please add at least one reason to enroll.</div>
             </div>
            
             <div class="input-group">
               <label for="courseDuration">Duration (in weeks): <span class="star">*</span></label>
               <input type="text" id="courseDuration" placeholder="Enter duration in weeks" [(ngModel)]="courseDuration"
                 (ngModelChange)="onFieldChange()">
               <div *ngIf="showCourseDurationError" class="error-message">Please enter the course duration.</div>
             </div>
             <div class="input-group">
               <label for="courseLanguage">Language: <span class="star">*</span></label>
               <select id="courseLanguage" [(ngModel)]="courseLanguage" (ngModelChange)="onFieldChange()">
                 <option value="english">English</option>
                 <option value="telugu">Telugu</option>
                 <option value="hindi">Hindi</option>
               </select>
               <div *ngIf="showLanguageError" class="error-message">Please select a language.</div>
             </div>
             <button (click)="submitFirstSet()">Save Course</button>
           </div>
      

      <div *ngIf="currentTab === 'coursetrailer'">
        <!-- Course Trailer Section -->
        <div class="course-trailer-section">
          <h4>Course Trailer</h4>

          <div *ngFor="let trailer of videoTrailers; let i = index">
            <h4>Video Trailer {{i + 1}}</h4>
            
            <div>
              <input type="file" 
                     (change)="onFilevideoTrailersSelected($event, i)" 
                     [required]="i === 0"> <!-- Mandatory for the first trailer -->
              
              <input type="text" 
                     placeholder="Title" 
                     [(ngModel)]="trailer.title" 
                     [required]="i === 0"> <!-- Mandatory for the first trailer -->
              
              <label for="trailer-description-{{i}}">
                Course level: 
                <span *ngIf="i === 0" class="star">*</span> <!-- * mark for the first trailer -->
              </label>
              
              <select id="trailer-description-{{i}}" 
                      [(ngModel)]="trailer.description" 
                      [required]="i === 0"> <!-- Mandatory for the first trailer -->
                <option value="Beginner">Beginner level</option>
                <option value="Intermediate">Intermediate level</option>
                <option value="Advanced">Advanced level</option>
              </select>
            </div>
          </div>
          
          <button (click)="uploadTrailers()">Upload Videos</button>
          
          <div *ngFor="let response of uploadResponses; let i = index">
            <p>Video {{i + 1}}: {{response}}</p>
          </div>
          
          
          <!-- <form (ngSubmit)="saveVideo2()">
            <div class="form-group">
              <label for="trailer">Upload Trailer Video:</label>
              <input type="file" id="trailer" (change)="onVideoUpload2($event)" accept="video/*" required />
            </div>
            <div class="button-container">
              <button type="submit">Save</button>
            </div>
          </form> -->
        </div>
        <!-- Course Document Section -->
        <div class="course-document-section">
          <h4>Course material</h4>
          <form (ngSubmit)="onSubmitResourse()" enctype="multipart/form-data">
            <div>
              <label for="document">Course material:</label>
              <input type="file" id="document" (change)="onFileSelectedResourse($event)" required />
            </div>
            <button type="submit">Upload</button>
          </form>
        </div>
      </div>
      
      <!-- Course Planning Tab Content -->
      <li (click)="setCurrentTab('planning')" [class.active]="currentTab === 'planning'" class="course-planning">

       
        <div class="planning-inputs" *ngIf="currentTab === 'planning'">
                <!-- <div class="progress-bar" style="top: 95px;">
                  <span>{{ completionPercentage }}% Completed</span>
                </div> -->
       
               
                <form (ngSubmit)="onSubmit()" enctype="multipart/form-data">
                  <div class="tools-section">
                   
                    <div *ngFor="let tool of tools; let i = index" class="tool-details">
                      <div class="form-group toolName">
                        <label for="toolName{{i}}">Tool Name:</label>
                        <input type="text" class="form-control" id="toolName{{i}}" name="toolName{{i}}" [(ngModel)]="tool.name" required (ngModelChange)="onFieldChange()">
                      </div>
                     
                      <div class="form-group toolImage">
                        <label for="toolImage{{i}}">Tool Image:</label>
                        <input type="file" class="form-control-file" id="toolImage{{i}}" name="toolImage{{i}}"
                          (change)="onFileSelected1($event, 'tool', i)" required (ngModelChange)="onFieldChange()" >
                      </div>
                      <div *ngIf="showToolError" class="error-message">
                        Please add at least one tool with name and image.
                      </div>
                    </div>
                    <button type="button" (click)="addTool()"> <i class="fas fa-plus"></i><!-- Add Tool --></button>
                   
                  </div>
                 
                  <div class="skills-section">
                   
                    <div *ngFor="let skill of skills; let i = index" class="skill-details">
                      <div class="form-group skillName">
                        <label for="skillName{{i}}">Skill Name:</label>
                        <input type="text" class="form-control" id="skillName{{i}}" name="skillName{{i}}" [(ngModel)]="skill.name" required (ngModelChange)="onFieldChange()">
                      </div>
                      <div *ngIf="formErrors.skills" class="error-message">{{ formErrors.skills }}</div>
                      <div class="form-group skillImage">
                        <label for="skillImage{{i}}">Skill Image:</label>
                        <input type="file" class="form-control-file" id="skillImage{{i}}" name="skillImage{{i}}"
                          (change)="onFileSelected1($event, 'skill', i)" required (ngModelChange)="onFieldChange()">
                      </div>
                      <div *ngIf="showSkillError" class="error-message">
                        Please add at least one skill with name and image.
                      </div>
                    </div>
                    <button type="button" (click)="addSkill()"> <i class="fas fa-plus"></i><!-- Add Skill --></button>
                  </div>
                 
                  <div class="course-prerequisites">
                    <div *ngFor="let prereq of prerequisites; let i = index">
                      <div class="form-group Prerequisites">
                        <label for="coursePrerequisites{{i}}">Course Prerequisite:</label>
                        <input type="text" class="form-control" id="coursePrerequisites{{i}}" 
                               name="coursePrerequisites{{i}}" [(ngModel)]="prerequisites[i]"  (ngModelChange)="onPrerequisiteChange(i, $event)"
                               [ngModelOptions]="{standalone: true}" required>
                      </div>
                    </div>
                    <div *ngIf="showPrerequisiteError" class="error-message">
                      Please add at least one prerequisite.
                    </div>
                    <button type="button" (click)="addPrerequisite()" [disabled]="prerequisites.length >= 8">
                      <i class="fas fa-plus"></i><!-- Add Prerequisite -->
                    </button>
                  </div>
                 
                  <button type="submit" class="btn btn-primary" >Save</button>
                </form>
              </div>
       
      </li>

      <!-- Curriculum Tab Content -->
      <div *ngIf="currentTab === 'dummy'" class="curriculum-section">
        <h2>Course Curriculum</h2>
        <div *ngFor="let lesson of lessons; let i = index" class="lesson-item">
          <h3>Lesson {{i + 1}}</h3>
          <!-- /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////                   -->


          <button (click)="createLesson()">Create Lesson</button>
          <div *ngFor="let lesson of lessons; let i = index" class="lesson-item">
            <h3>Lesson {{i + 1}}</h3>

            <div class="input-group">
              <label for="lesson-title-{{i}}">Lesson Title:</label>
              <ng-container *ngIf="!lesson.editingTitle; else editTitleInput">
                <span>{{ lesson.lessonTitle }}</span>
                <button (click)="startEditLessonTitle(i)">Edit</button>
              </ng-container>
              <ng-template #editTitleInput>
                <input type="text" id="lesson-title-{{i}}" [(ngModel)]="lesson.lessonTitle"
                  placeholder="Enter lesson title">
                <button (click)="saveLessonTitle(i)">Save</button>
                <button (click)="cancelEditLessonTitle(i)">Cancel</button>
              </ng-template>
            </div>

            <div class="input-group">
              <label for="lesson-content-{{i}}">Lesson Content:</label>
              <ng-container *ngIf="!lesson.editingContent; else editContentInput">
                <p>{{ lesson.lessonContent }}</p>
                <button (click)="startEditLessonContent(i)">Edit</button>
              </ng-container>
              <ng-template #editContentInput>
                <textarea id="lesson-content-{{i}}" [(ngModel)]="lesson.lessonContent"
                  placeholder="Enter lesson content"></textarea>
                <button (click)="saveLessonContent(i)">Save</button>
                <button (click)="cancelEditLessonContent(i)">Cancel</button>
              </ng-template>
            </div>

            <div class="input-group">
              <label for="lesson-description-{{i}}">Lesson Description:</label>
              <ng-container *ngIf="!lesson.editingDescription; else editDescriptionInput">
                <p>{{ lesson.lessonDescription }}</p>
                <button (click)="startEditLessonDescription(i)">Edit</button>
              </ng-container>
              <ng-template #editDescriptionInput>
                <textarea id="lesson-description-{{i}}" [(ngModel)]="lesson.lessonDescription"
                  placeholder="Enter lesson description"></textarea>
                <button (click)="saveLessonDescription(i)">Save</button>
                <button (click)="cancelEditLessonDescription(i)">Cancel</button>
              </ng-template>
            </div>

            <div class="input-group">
              <label for="lesson-duration-{{i}}">Lesson Duration (minutes):</label>
              <input type="number" id="lesson-duration-{{i}}" [(ngModel)]="lesson.lessonDuration"
                placeholder="Enter lesson duration">
            </div>
          </div>
          <button>save course </button>
          <button (click)="addLesson()"><i class="fas fa-plus"></i>Add New Lesson</button>
          <!-- /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////              -->

          <!-- lesson video -->
          <div class="input-group">
            <label>Videos:</label>
            <div *ngFor="let video of lesson.videos; let v = index" class="file-item">
              <span>{{video.file.name}}</span>
              <button (click)="removeVideo(i, v)">
                <i class="fas fa-trash"></i> <!-- Remove Icon -->
              </button>
            </div>
            <div class="videos">
              <input type="file" id="videos" (change)="onVideoUpload($event, i)" accept="video/*">
            </div>
          </div>

          <!-- PDF -->
          <div class="input-group">
            <label>PDFs:</label>
            <div *ngFor="let pdf of lesson.pdfs; let p = index" class="file-item">
              <span>{{pdf.file.name}}</span>
              <button (click)="removePdf(i, p)">
                <i class="fas fa-trash"></i> <!-- Remove Icon -->
              </button>
            </div>
            <div class="file-upload">
              <input type="file" (change)="onPdfUpload($event, i)" accept="application/pdf">
            </div>
          </div>

          <!-- Objectives -->
          <div class="input-group">
            <label>Objective:</label>
            <input type="text" [(ngModel)]="lesson.objective" placeholder="Enter lesson objective"
              [disabled]="!lesson.editingObjective">
            <button *ngIf="!lesson.editingObjective" (click)="startEditObjective(i)">Edit</button>
            <ng-container *ngIf="lesson.editingObjective">
              <button (click)="saveObjective(i)">Save</button>
              <button (click)="cancelEditObjective(i)">Cancel</button>
            </ng-container>
          </div>

          <!-- Existing video and PDF sections... -->

          <!-- Quizzes -->
          <div class="input-group">
            <label>Quizzes:</label>
            <ul>
              <li *ngFor="let quiz of lesson.quizzes; let q = index">
                {{quiz}}
                <button (click)="removeQuiz(i, q)">
                  <i class="fas fa-trash"></i> <!-- Remove Icon -->
                </button>
              </li>
            </ul>
            <input type="text" [(ngModel)]="newQuiz" placeholder="Enter new quiz">
            <button (click)="addQuiz(i)">
              <i class="fas fa-plus"></i> <!-- Add Icon -->
            </button>
          </div>

          <!-- Assignments -->
          <div class="input-group">
            <label>Assignments:</label>
            <ul>
              <li *ngFor="let assignment of lesson.assignments; let a = index">
                {{assignment}}
                <button (click)="removeAssignment(i, a)">
                  <i class="fas fa-trash"></i> <!-- Remove Icon -->
                </button>
              </li>
            </ul>
            <input type="text" [(ngModel)]="newAssignment" placeholder="Enter new assignment">
            <button (click)="addAssignment(i)">
              <i class="fas fa-plus"></i> <!-- Add Icon -->
            </button>
          </div>

          <!-- Projects -->


          <button (click)="removeLesson(i)">
            <i class="fas fa-trash"></i> <!-- Remove Icon -->
            Delete lesson
          </button>

          <div class="lesson-save">
            <button (click)="saveLesson(i)">Save Lesson</button>
          </div>
        </div>
        <button (click)="addLesson()">
          <i class="fas fa-plus"></i>
          Add New Lesson
        </button>

        <!-- ////////////////////////////////////////add lesson 2 nd set //////////////////////////////////////////////             -->

      </div>





      <!-- //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// -->
      <!-- Pricing Tab Content -->
      <div *ngIf="currentTab === 'pricing'" class="pricing-section">
        <!-- <div class="progress-bar" style="top: 95px;">
          <span>{{ completionPercentage }}% Completed</span>
        </div> -->
        <div class="form-group">
          <h2 style="text-align: center;">Course Fee</h2>
          <label for="currency">Currency:</label>
          <select id="currency" [(ngModel)]="currency" (ngModelChange)="onFieldChange()">
            <option value="INR">₹ INR</option>
            <option value="USD">$ USD</option>
            <option value="EUR">€ EUR</option>
            <!-- Add more currency options as needed -->
          </select>

        </div>
        <div class="form-group">
          <label for="courseFee">Course Fee:</label>
          <input type="number" id="courseFee" [(ngModel)]="courseFee" (ngModelChange)="calculateDiscount()" (ngModelChange)="onFieldChange()">
        </div>

        <div class="form-group">
          <h2 style="text-align: center;">Discount</h2>
          <label for="discountPercentage">Discount Percentage:</label>
          <input type="number" id="discountPercentage" [(ngModel)]="discountPercentage"
            (ngModelChange)="calculateDiscount()" >
   
        </div>
        <div class="form-group">
          <label for="expirationDate">Expiration Date:</label>
          <input type="date" id="expirationDate" [(ngModel)]="expirationDate" >
        </div>

        <div class="form-group">
          <!-- <button type="button" (click)="createCoupon()">Create Course</button> -->

        </div>
      </div>





      <!-- //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// -->
      <!-- //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// -->
      <div *ngIf="currentTab === 'lesson'" class="lesson-section">
        <!-- <div class="progress-bar" style="top: 95px;">
          <span>{{ completionPercentage }}% Completed</span>
        </div> -->
        <div style="display: flex; gap: 20px; align-items: center; margin-left: 270px;">
          <label>
            <input type="checkbox" [(ngModel)]="isOffline" (change)="toggleSections('offline')" [checked]="isOffline">
            Offline
          </label>
          <label>
            <input type="checkbox" [(ngModel)]="isOnline" (change)="toggleSections('online')" [checked]="isOnline">
            Online
          </label>
        </div>

        <div *ngIf="isOffline" class="offline-section">
          <!-- ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// -->

      
          <div class="course-creator">
   
            <div class="course-type">



            </div>
            <!-- //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// -->
            <form (ngSubmit)="onSubmit1()">
              <div *ngIf="courseTerm === 'short'" class="short-course">
                <div class="add-lesson-section">
                  <button (click)="addNewLesson()">Add Lesson</button>
                </div>
                <div *ngIf="alertMessage"
                  [ngClass]="{'alert-success': alertType === 'success', 'alert-error': alertType === 'error'}" class="alert">
                  {{ alertMessage }}
                </div>
              
                <div *ngFor="let lesson of lessons2; let i = index" class="lesson-container">
                  <div class="lesson-create-section">
                    <h2>Create Lesson {{ i + 1 }}</h2>
                    <form (ngSubmit)="generateLesson(i)" #lessonForm="ngForm">
                      <div>
                        <label for="lessonTitle{{i}}">Lesson Title:</label>
                        <input type="text" id="lessonTitle{{i}}" name="lessonTitle" [(ngModel)]="lesson.lessonTitle" required
                          #lessonTitle="ngModel">
                        <div *ngIf="lessonTitle.invalid && (lessonTitle.dirty || lessonTitle.touched)" class="alert alert-danger">
                          Lesson title is required.
                        </div>
                      </div>
                      <div>
                        <label for="lessonContent{{i}}">Lesson Content:</label>
                        <textarea id="lessonContent{{i}}" name="lessonContent" [(ngModel)]="lesson.lessonContent"></textarea>
                      </div>
                      <div>
                        <label for="lessonDescription{{i}}">Lesson Description:</label>
                        <textarea id="lessonDescription{{i}}" name="lessonDescription" [(ngModel)]="lesson.lessonDescription"></textarea>
                      </div>
                      <div>
                        <label for="lessonDuration{{i}}">Lesson Duration (minutes):</label>
                        <input type="number" id="lessonDuration{{i}}" name="lessonDuration" [(ngModel)]="lesson.lessonDuration" min="0">
                      </div>
                      <button type="submit" [disabled]="lessonForm.form.invalid">Save Lesson</button>
                    </form>
              
                    <!-- Add Course Quiz Button -->
                    <button (click)="toggleOverlay()">Add Quiz</button>
              
                    <!-- Add Course Assignments Button -->
                    <button (click)="addcourseAssignments()">Add Assignments</button>
                  </div>

<!-- [11:30] Durga Prasad Devarakonda -->
 <div class="add-assignment-container">
                    <!-- Popup structure -->
                    <div *ngIf="isPopupVisible" class="dpopup-overlay">
                      <div class="dpopup-content">
                        <button class="dclose-popup-btn" (click)="closePopup()">X</button>
                 
                        <!-- Assignment form content -->
                        <form [formGroup]="assignmentForm" (ngSubmit)="onSubmit2()">
                          <div class="assignmentTitle">
                            <label for="assignmentTitle" class="Title">Title:</label><br>
                            <input id="assignmentTitle" formControlName="assignmentTitle" placeholder="assignmentTitle" class="inputBox" />
                          </div>
                 
                          <div class="topic1">
                            <label for="assignmentTopicName" class="Title">Topic:</label><br>
                            <input id="assignmentTopicName" formControlName="assignmentTopicName" placeholder="assignmentTopicName" class="inputBox" /><br>
                          </div>
                 
                          <div class="topic1">
                            <label for="start-date" class="Title">Start Date:</label><br>
                            <input id="start-date" type="date" formControlName="startDate" class="inputBox" /><br>
                            <p class="pTag" *ngIf="assignmentForm.get('startDate')?.hasError('invalidDate')">Start date should not be before the current date.</p>
                          </div>
                 
                          <div class="topic1">
                            <label for="end-date" class="Title">End Date:</label><br>
                            <input id="end-date" type="date" formControlName="endDate" class="inputBox" /><br>
                          </div>
                 
                          <div class="topic1">
                            <label for="review-meet-date" class="Title">Review Meet Date:</label><br>
                            <input id="review-meet-date" type="date" formControlName="reviewMeetDate" class="inputBox" /><br>
                          </div>
                 
                          <div class="upload-section">
                            <label for="file">Choose file to upload</label>
                            <input type="file" id="file" name="file" accept=".pdf" (change)="onFileChange2($event)">
                          </div>
                 
                          <button type="submit" [disabled]="!assignmentForm.valid || !selectedFile">Upload</button>
                        </form>
                      </div>
                    </div>
                  </div>
 
              
                  <div class="add-content-container">
                    <h5 class="add-content-header">Add Content</h5>
                    <form class="add-content-form" (ngSubmit)="onSubmitLessonVideo()" #uploadForm="ngForm">
                      <div *ngFor="let uploadSet of uploadSets; let setIndex = index" class="upload-set">
                        <h6 class="add-content-subheader">Video {{setIndex + 1}}</h6>
                        <div class="video-upload">
                          <label for="videoUpload-{{setIndex}}" class="add-content-label">Upload Videos:</label>
                          <input type="file" id="videoUpload-{{setIndex}}" class="add-content-input-file"
                            (change)="onFileChange($event, setIndex)" multiple accept="video/*" required>
                        </div>
                        <div *ngFor="let file of uploadSet.videoFiles; let i = index" class="file-description">
                          <label for="description-{{setIndex}}-{{i}}" class="add-content-label">Description for
                            {{file.name}}:</label>
                          <input type="text" id="description-{{setIndex}}-{{i}}" class="add-content-input-text"
                            name="description-{{setIndex}}-{{i}}" [(ngModel)]="uploadSet.videoDescriptions[i]" required>
                          <button type="submit" class="add-content-button">Upload Video {{setIndex + 1}}</button>
                        </div>
                      </div>
              
                      <button type="button" class="add-content-button-secondary" (click)="addNewUploadSet()">Add More
                        Videos</button>
                    </form>
                  </div>
                </div>
              
                <!-- Quiz Creator Overlay -->
                <div class="container">
                  <div class="overlay" *ngIf="showOverlay">
                    <div class="overlay-content">
                      <button class="close-button" (click)="toggleOverlay()">×</button>
                      <h1>Quiz Creator</h1>
                   
                      <div class="quiz-name-input">
                        <div class="quizTitle">
                          <label for="quizName">Quiz Name:</label>
                          <input type="text" id="quizName" name="quizName" [(ngModel)]="quizName" placeholder="Enter quiz name">
                        </div>
                       
                        <div class="quizDates">
                          <label for="startDate">Start Date and Time:</label>
                          <input type="datetime-local" id="startDate" name="startDate" [(ngModel)]="startDate">
               
                          <label for="endDate">End Date and Time:</label>
                          <input type="datetime-local" id="endDate" name="endDate" [(ngModel)]="endDate">
                        </div>
                        <!-- (click)="dummy(lessonid)" -->
                        <button type="button" class="small-icon" (click)="onSaveQuiz()">Create Quiz</button>
                      </div>
              
                      <form id="quizCreatorForm" *ngIf="isQuizCreated">
                        <div id="questionsContainer">
                          <div *ngFor="let question of questions; let i = index" class="question">
                            <p>
                              <span class="question-number">{{i + 1}}</span>.
                              <input type="text" placeholder="Enter question text" class="questionbox" [(ngModel)]="question.text" name="question{{i}}Text">
                            </p>
                 
                            <div *ngFor="let option of question.options; let j = index">
                              {{option.label}}
                              <input type="text" class="answerbox" [(ngModel)]="option.text" name="question{{i}}Option{{j}}">
                            </div>
                 
                            <p>
                              Correct Answer:
                              <select [(ngModel)]="question.correctAnswer" name="question{{i}}CorrectAnswer">
                                <option *ngFor="let option of question.options" [value]="option.text">{{option.text}}</option>
                              </select>
                            </p>
                 
                            <span class="icon small-icon" (click)="deleteQuestion(i)">
                              <i class="fas fa-trash-alt"></i>
                            </span>
                          </div>
                        </div>
                        <button type="button" class="small-icon" (click)="addMCQ()">Add MCQ</button>
                        <button type="button" class="small-icon" (click)="submitQuiz()">Submit Quiz</button>
                      </form>
                    </div>
                  </div>
                </div>
              </div>
              
              <!-- ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////              -->

              <!-- <div *ngIf="courseType1 === 'long'" class="long-course"> -->
               <div *ngIf="courseTerm === 'long'" class="long-course">
  <h2>Long Course Modules</h2>
  <div *ngFor="let module of modules; let moduleIndex = index" class="module">
    <div class="module-header" (click)="toggleLessons(moduleIndex)">
      <input type="text" [(ngModel)]="module.name" name="moduleName{{moduleIndex}}"
        placeholder="Module Name" required (input)="enableDropdown()">
      <button type="button" class="remove" (click)="removeModule(moduleIndex); $event.stopPropagation()"
        *ngIf="modules.length > 1">&times;</button>
      <span class="toggle-icon">{{ activeModuleIndex === moduleIndex ? '▼' : '►' }}</span>
    </div>
    <button type="button" (click)="onSubmitModule(moduleIndex)">Save Module</button>
    <div *ngIf="activeModuleIndex === moduleIndex" class="module-content">
      <!-- Add Lesson Button Section -->
      <!-- <div class="add-lesson-section">
        <button (click)="addNewLesson1(moduleIndex)">Add Lesson</button>
      </div> -->

      <!-- Alert Message Section -->
      <div *ngIf="alertMessage"
        [ngClass]="{'alert-success': alertType === 'success', 'alert-error': alertType === 'error'}"
        class="alert">
        {{ alertMessage }}
      </div>

      <!-- Existing Lessons Section -->
      <div *ngFor="let lesson of module.lessons; let lessonIndex = index" class="lesson-container">
        <div class="lesson-create-section">
          <h2>Save Lesson {{ lessonIndex + 1 }}</h2>
          <form (ngSubmit)="generateLesson2(moduleIndex, lessonIndex)" #lessonForm="ngForm">
            <div>
              <label for="lessonTitle{{moduleIndex}}{{lessonIndex}}">Lesson Title:</label>
              <input type="text" id="lessonTitle{{moduleIndex}}{{lessonIndex}}" name="lessonTitle"
                [(ngModel)]="lesson.lessonTitle" required #lessonTitle="ngModel">
              <div *ngIf="lessonTitle.invalid && (lessonTitle.dirty || lessonTitle.touched)"
                class="alert alert-danger">
                Lesson title is required.
              </div>
            </div>
            <div>
              <label for="lessonContent{{moduleIndex}}{{lessonIndex}}">Lesson Content:</label>
              <textarea id="lessonContent{{moduleIndex}}{{lessonIndex}}" name="lessonContent"
                [(ngModel)]="lesson.lessonContent"></textarea>
            </div>
            <div>
              <label for="lessonDescription{{moduleIndex}}{{lessonIndex}}">Lesson Description:</label>
              <textarea id="lessonDescription{{moduleIndex}}{{lessonIndex}}" name="lessonDescription"
                [(ngModel)]="lesson.lessonDescription"></textarea>
            </div>
            <div>
              <label for="lessonDuration{{moduleIndex}}{{lessonIndex}}">Lesson Duration (minutes):</label>
              <input type="number" id="lessonDuration{{moduleIndex}}{{lessonIndex}}" name="lessonDuration"
                [(ngModel)]="lesson.lessonDuration" min="0">
            </div>
            <button type="submit" [disabled]="lessonForm.form.invalid">Save Lesson</button><br>
            <button type="submit" (click)="addcourseAssignments()">Add Assignment</button><br>
            <!-- Add Course Quiz Button -->
             
            <button (click)="toggleOverlay()">Add Quiz Creator</button>
          </form>

          <!-- [11:30] Durga Prasad Devarakonda -->
          <div class="add-assignment-container">
                             <!-- Popup structure -->
                             <div *ngIf="isPopupVisible" class="dpopup-overlay">
                               <div class="dpopup-content">
                                 <button class="dclose-popup-btn" (click)="closePopup()">X</button>
                          
                                 <!-- Assignment form content -->
                                 <form [formGroup]="assignmentForm" (ngSubmit)="onSubmit2()">
                                   <div class="assignmentTitle">
                                     <label for="assignmentTitle" class="Title">Title:</label><br>
                                     <input id="assignmentTitle" formControlName="assignmentTitle" placeholder="assignmentTitle" class="inputBox" />
                                   </div>
                          
                                   <div class="topic1">
                                     <label for="assignmentTopicName" class="Title">Topic:</label><br>
                                     <input id="assignmentTopicName" formControlName="assignmentTopicName" placeholder="assignmentTopicName" class="inputBox" /><br>
                                   </div>
                          
                                   <div class="topic1">
                                     <label for="start-date" class="Title">Start Date:</label><br>
                                     <input id="start-date" type="date" formControlName="startDate" class="inputBox" /><br>
                                     <p class="pTag" *ngIf="assignmentForm.get('startDate')?.hasError('invalidDate')">Start date should not be before the current date.</p>
                                   </div>
                          
                                   <div class="topic1">
                                     <label for="end-date" class="Title">End Date:</label><br>
                                     <input id="end-date" type="date" formControlName="endDate" class="inputBox" /><br>
                                   </div>
                          
                                   <div class="topic1">
                                     <label for="review-meet-date" class="Title">Review Meet Date:</label><br>
                                     <input id="review-meet-date" type="date" formControlName="reviewMeetDate" class="inputBox" /><br>
                                   </div>
                          
                                   <div class="upload-section">
                                     <label for="file">Choose file to upload</label>
                                     <input type="file" id="file" name="file" accept=".pdf" (change)="onFileChange2($event)">
                                   </div>
                          
                                   <button type="submit" [disabled]="!assignmentForm.valid || !selectedFile">Upload</button>
                                 </form>
                               </div>
                             </div>
                           </div>
          
        </div>

        <!-- Video Upload Section -->
        <div class="add-content-container">
          <h5 class="add-content-header">Add Content</h5>
          <div *ngFor="let module of modules; let moduleIndex = index">
            <div *ngFor="let lesson of module.lessons; let lessonIndex = index">
              <div class="add-content-container">
                <h5 class="add-content-header">Add Content</h5>
                <form class="add-content-form" (ngSubmit)="onSubmitLessonVideo2(moduleIndex, lessonIndex)" #uploadForm="ngForm">
                  <div *ngFor="let uploadSet of lesson.uploadSets; let setIndex = index" class="upload-set">
                    <h6 class="add-content-subheader">Video {{ setIndex + 1 }}</h6>
                    <div class="video-upload">
                      <label for="videoUpload-{{moduleIndex}}{{lessonIndex}}{{setIndex}}" class="add-content-label">
                        Upload Videos:
                      </label>
                      <input type="file" id="videoUpload-{{moduleIndex}}{{lessonIndex}}{{setIndex}}"
                        class="add-content-input-file"
                        (change)="onFileChange($event, setIndex, moduleIndex, lessonIndex)" multiple accept="video/*" required>
                    </div>
                    <div *ngFor="let file of uploadSet.videoFiles; let i = index" class="file-description">
                      <label for="description-{{moduleIndex}}{{lessonIndex}}{{setIndex}}-{{i}}" class="add-content-label">
                        Description for {{ file.name }}:
                      </label>
                      <input type="text" id="description-{{moduleIndex}}{{lessonIndex}}{{setIndex}}-{{i}}" 
                        class="add-content-input-text" name="description-{{moduleIndex}}{{lessonIndex}}{{setIndex}}-{{i}}"
                        [(ngModel)]="uploadSet.videoDescriptions[i]" required>
                      <button type="submit" class="add-content-button">Upload video {{ setIndex + 1 }}</button>
                    </div>
                  </div>
                  <button type="button" class="add-content-button-secondary" (click)="addNewUploadSet2(moduleIndex, lessonIndex)">
                    Add More Videos
                  </button>
                </form>
              </div>
            </div>
          </div>
        </div>

        <button type="button" class="remove" (click)="removeLesson1(moduleIndex, lessonIndex)"
          *ngIf="module.lessons.length > 1">&times;</button>
      </div>

      <button type="button" class="add" (click)="addLesson3(moduleIndex)">Add Lesson</button>
      <!-- <button type="button" class="generate" (click)="generateLessons(5)">Generate 5 Lessons</button> -->
    </div>
  </div>
  <button type="button" class="add" (click)="addModule()">Add Module</button>

  <!-- Overlay for Quiz Creator -->
  <div class="container">
    <div class="overlay" *ngIf="showOverlay">
      <div class="overlay-content">
        <button class="close-button" (click)="toggleOverlay()">×</button>
        <h1>Quiz Creator</h1>
     
        <div class="quiz-name-input">
          <div class="quizTitle">
            <label for="quizName">Quiz Name:</label>
            <input type="text" id="quizName" name="quizName" [(ngModel)]="quizName" placeholder="Enter quiz name">
          </div>
         
          <div class="quizDates">
            <label for="startDate">Start Date and Time:</label>
            <input type="datetime-local" id="startDate" name="startDate" [(ngModel)]="startDate">
 
            <label for="endDate">End Date and Time:</label>
            <input type="datetime-local" id="endDate" name="endDate" [(ngModel)]="endDate">
          </div>
          <!-- (click)="dummy(lessonid)" -->
          <button type="button" class="small-icon" (click)="onSaveQuiz2()">Create Quiz</button>
        </div>

        <form id="quizCreatorForm" *ngIf="isQuizCreated">
          <div id="questionsContainer">
            <div *ngFor="let question of questions; let i = index" class="question">
              <p>
                <span class="question-number">{{i + 1}}</span>.
                <input type="text" placeholder="Enter question text" class="questionbox" [(ngModel)]="question.text" name="question{{i}}Text">
              </p>
   
              <div *ngFor="let option of question.options; let j = index">
                {{option.label}}
                <input type="text" class="answerbox" [(ngModel)]="option.text" name="question{{i}}Option{{j}}">
              </div>
   
              <p>
                Correct Answer:
                <select [(ngModel)]="question.correctAnswer" name="question{{i}}CorrectAnswer">
                  <option *ngFor="let option of question.options" [value]="option.text">{{option.text}}</option>
                </select>
              </p>
   
              <span class="icon small-icon" (click)="deleteQuestion(i)">
                <i class="fas fa-trash-alt"></i>
              </span>
            </div>
          </div>
          <button type="button" class="small-icon" (click)="addMCQ()">Add MCQ</button>
          <button type="button" class="small-icon" (click)="submitQuiz()">Submit Quiz</button>
        </form>
      </div>
    </div>
  </div>
</div>
                
              <!-- ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// -->
              <!-- <button type="submit" class="submit">Create Course</button> -->
            </form>
          </div>

          

          <!-- <div class="project-section">
            <h3>Project</h3>
            <div class="input-group">
              <label for="project-title">Project Title:</label>
              <input type="text" id="project-title" [(ngModel)]="newProjectTitle" placeholder="Enter project title" (ngModelChange)="onFieldChange()" >
            </div>
            <div class="input-group">
              <label for="project-description">Project Description:</label>
              <textarea id="project-description" [(ngModel)]="newProjectDescription"
                placeholder="Enter project description" (ngModelChange)="onFieldChange()"></textarea>
            </div>
            <div class="input-group">
              <label for="deadline">Deadline:</label>
              <input type="date" id="deadline" [(ngModel)]="newprojectDeadline" (ngModelChange)="onFieldChange()">
            </div>
            <div class="input-group">
              <label for="project-document">Project Document:</label>
              <input type="file" id="project-document" (change)="onNewProjectDocumentSelected($event)"
                accept=".pdf,.doc,.docx" (ngModelChange)="onFieldChange()">
            </div>
            <button
              (click)="addProject(courseId, newProjectTitle, newProjectDescription, newprojectDeadline, document)">Save
              Project</button>
            
          </div> -->


<!-- <div>
          <form (ngSubmit)="onSubmitResourse()" enctype="multipart/form-data">
            <div>
              <label for="document">Course Document:</label>
              <input type="file" id="document" (change)="onFileSelectedResourse($event)" required />
            </div>
            <button type="submit">Upload</button>
          </form>
          </div> -->
        </div>


     



        <!-- //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// -->
        <!-- <div *ngIf="!isOffline" class="online-section"> -->
        <!-- <div *ngIf=" courseTerm === 'online'" class="online-section"> -->
        <div *ngIf="courseType === 'online'" class="online-section">


          <!-- Online section content -->
          <form [formGroup]="courseForm" (ngSubmit)="onSubmitOnline()">
            <div formArrayName="courses">
              <div *ngFor="let course of courses.controls; let i = index" [formGroupName]="i">
                <div>
                  <label for="courseTopic">Course Topic</label>
                  <input id="courseTopic" formControlName="courseTopic" type="text">
                </div>

                <div>
                  <label for="meetingStarting">Meeting Starting</label>
                  <input id="meetingStarting" formControlName="meetingStarting" type="datetime-local">
                </div>


                <div>
                  <button type="submit">Generate link</button>
                </div>

                <button type="button" (click)="removeCourse(i)">Remove</button>
              </div>
            </div>

            <div>
              <button type="button" (click)="addCourse()">Add More</button>
            </div>
          </form>
        </div>
      </div>

   <!-- ///////////////// PROJECT TAB SECTION ////////////////////// -->
   <div *ngIf="currentTab === 'project'">
    <form [formGroup]="projectForm" (ngSubmit)="addProject()">
      <div class="project-section">
        <h3>Project 1</h3>
  
        <div class="input-group">
          <label for="project-title">Project Title:</label><span class="star">*</span>
          <input type="text" id="project-title" formControlName="newProjectTitle" placeholder="Enter project title" (ngModelChange)="onFieldChange()">
          <div *ngIf="projectForm.get('newProjectTitle')?.invalid && projectForm.get('newProjectTitle')?.touched" class="error-message">
            Project title is required
          </div>
        </div>
  
        <div class="input-group">
          <label for="project-description">Project Description:</label><span class="star">*</span>
          <textarea id="project-description" formControlName="newProjectDescription" placeholder="Enter project description" (ngModelChange)="onFieldChange()"></textarea>
          <div *ngIf="projectForm.get('newProjectDescription')?.invalid && projectForm.get('newProjectDescription')?.touched" class="error-message">
            Project description is required
          </div>
        </div>
  
        <div class="input-group">
          <label for="deadline">Deadline:</label><span class="star">*</span>
          <input type="date" id="deadline" formControlName="newprojectDeadline" (ngModelChange)="onFieldChange()">
          <div *ngIf="projectForm.get('newprojectDeadline')?.invalid && projectForm.get('newprojectDeadline')?.touched" class="error-message">
            Project deadline is required
          </div>
        </div>
  
        <div class="input-group">
          <label for="project-document">Project Document:</label><span class="star">*</span>
          <input type="file" id="project-document" (change)="onNewProjectDocumentSelected($event)" accept=".pdf,.doc,.docx" (ngModelChange)="onFieldChange()">
          <div *ngIf="projectForm.get('document')?.invalid && projectForm.get('document')?.touched" class="error-message">
            Project document is required
          </div>
        </div>
  
        <button type="submit" [disabled]="projectForm.invalid">Save Project</button>
      </div>
    </form>
  </div>
  

      <!-- //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// -->


      <div class="form-actions">
        <!-- <button type="button" (click)="saveCurrentTab()">Save</button> -->
        <button type="button" *ngIf="!shouldHidePreviousButton()" (click)="goToPreviousTab()">Previous</button>
        <button type="button" *ngIf="!shouldHideNextButton()" (click)="goToNextTab()">Save Next</button>
        <button type="submit" *ngIf="shouldShowSecondSubmitButton()" (click)="createCoupon()">Submit course</button>
      </div>
    </div>
  </div>

</body>